<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AR.js with GPS - Cylinder Example</title>
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <script src="https://aframe.io/releases/1.0.4/aframe-ar.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
  <a-scene embedded arjs="sourceType: webcam;">
    <a-assets>
      <a-cylinder id="cylinder" radius="1" height="5" color="#ff0000" position="0 0 0"></a-cylinder>
    </a-assets>
    
    <a-camera gps-camera rotation-reader></a-camera>

    <a-entity 
      gps-entity-place="latitude: 35.6684025; longitude: 139.7919404;"
      look-at="[gps-camera]">
      <a-cylinder radius="1" height="5" color="#ff0000" position="0 2.5 0"></a-cylinder>
    </a-entity>
  </a-scene>

  <script>
    // GPS座標を設定
    const targetLat = 35.6684025; // 目標の緯度
    const targetLon = 139.7919404; // 目標の経度

    // デバイスの向きを更新
    window.addEventListener('deviceorientation', function(event) {
      const alpha = event.alpha; // Z軸の回転
      const beta = event.beta; // X軸の回転
      const gamma = event.gamma; // Y軸の回転
      const camera = document.querySelector('a-camera');
      camera.setAttribute('rotation', {x: beta, y: alpha, z: -gamma});
    });
  </script>
</body>
</html>
