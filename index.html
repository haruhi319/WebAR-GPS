<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ARでピンを表示</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/ar.js/1.7.2/aframe/build/aframe-ar.min.js"></script>
    <style>
        #arjsDebugUIContainer {
            display: none !important; /* デバッグUIを非表示にする */
        }
    </style>
</head>
<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs="debugUIEnabled: false;">
        <a-camera gps-camera rotation-reader></a-camera>
    </a-scene>

    <script>
        // JSONファイルからピンを追加
        fetch('suirotuuhou.json')
            .then(response => response.json())
            .then(data => {
                data.features.forEach(feature => {
                    const { attributes, geometry } = feature;

                    // 緯度と経度を取得
                    const lat = geometry.y;
                    const lng = geometry.x;
                    const nameParts = attributes.name.split(/[\s　、,、\-]+/);
                    const lastWord = nameParts[nameParts.length - 1];

                    // ピンを作成
                    const entity = document.createElement('a-entity');
                    entity.setAttribute('gps-entity-place', `latitude: ${lat}; longitude: ${lng}`);
                    entity.setAttribute('geometry', 'primitive: sphere; radius: 0.5');
                    entity.setAttribute('material', 'color: red; opacity: 0.8;');
                    entity.setAttribute('scale', '1 1 1');

                    // 高度を一時的に調整
                    entity.setAttribute('position', `0 10 0`); // 高さを10mに設定

                    // ピンをクリック時のポップアップ
                    entity.addEventListener('click', () => {
                        alert(`情報: ${lastWord}`);
                    });

                    // シーンにピンを追加
                    document.querySelector('a-scene').appendChild(entity);
                });
            })
            .catch(error => {
                console.error('JSONの読み込みに失敗しました:', error);
            });

    </script>
</body>
</html>
